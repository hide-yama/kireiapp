# チケット: ダッシュボード・フィード機能の強化

## 概要
ダッシュボードの機能強化とフィード表示の実装

## 詳細タスク

### 1. ダッシュボードの強化 ✅
- [x] 参加グループ一覧の表示
- [x] 最近の投稿サマリー
- [x] 今週の家事統計
- [x] クイックアクションボタン

### 2. フィード機能 ✅
- [x] `/app/(dashboard)/feed/page.tsx` の作成
- [x] 全グループの投稿を時系列表示
- [x] グループでのフィルタリング
- [x] カテゴリでのフィルタリング

### 3. 統計・分析機能 🚧
- [ ] 週間/月間の家事回数グラフ
- [x] カテゴリ別の統計（基本実装済み）
- [x] メンバー別の貢献度（基本実装済み）
- [ ] 時間帯別の投稿傾向

### 4. 検索機能 ✅
- [x] 投稿内容の全文検索
- [x] 日付範囲での検索
- [x] メンバーでの検索
- [x] 検索結果の表示

### 5. コンポーネント ✅
- [x] `components/dashboard/StatsCard.tsx` の作成
- [x] `components/dashboard/RecentPosts.tsx` の作成
- [x] `components/dashboard/GroupSummary.tsx` の作成
- [x] `components/feed/FeedFilter.tsx` の作成
- [x] `components/search/SearchBar.tsx` の作成
- [x] `components/ui/avatar.tsx` の作成
- [x] `components/ui/badge.tsx` の作成

### 6. API エンドポイント ✅
- [x] `/app/api/dashboard/stats/route.ts`
- [x] `/app/api/feed/route.ts`
- [x] `/app/api/search/route.ts`

## 受け入れ条件
- [x] ダッシュボードで活動サマリーが見られる
- [x] 全グループの投稿をフィードで確認できる
- [x] 投稿を検索できる
- [x] 統計情報が視覚的に表示される

## 実装結果

### ✅ 完了した機能

#### ダッシュボード強化
- **統計カード表示**: 総投稿数、今週の投稿、総活動時間、参加グループ数
- **参加グループ一覧**: グループ情報、メンバー表示、クイックアクション
- **最近の投稿**: 最新10件の投稿をアバター・カテゴリ付きで表示
- **クイックアクション**: 投稿作成、グループ管理、投稿一覧へのリンク

#### フィード機能
- **全投稿表示**: 参加グループの全投稿を時系列表示
- **フィルター機能**: グループ別・カテゴリ別のフィルタリング
- **ページネーション**: 50件ずつの表示制限
- **リアルタイム更新**: フィルター状態の管理

#### 検索機能
- **全文検索**: 投稿内容での検索
- **詳細検索**: 日付範囲、投稿者、カテゴリでの絞り込み
- **検索結果表示**: フィルター条件とマッチした投稿の表示

#### API エンドポイント
- **`/api/dashboard/stats`**: ダッシュボード統計データ取得
- **`/api/feed`**: フィード投稿取得（フィルター・ページネーション対応）
- **`/api/search`**: 投稿検索（複数条件対応）

### 🚧 残りのタスク
- 週間/月間の家事回数グラフ（グラフライブラリ導入が必要）
- 時間帯別の投稿傾向分析

## 技術的実装詳細

### データ取得パターン
- Supabaseの関連テーブル結合（`family_members`, `posts`, `profiles`等）
- 効率的なクエリ設計（必要なデータのみ選択）
- 適切なページネーション実装

### コンポーネント設計
- 再利用可能なUI コンポーネント（`StatsCard`, `RecentPosts`等）
- TypeScript による型安全性の確保
- レスポンシブデザイン対応

### パフォーマンス最適化
- サーバーサイドでのデータ取得
- 統計データの効率的な集計
- フィルター状態の適切な管理

## 技術的考慮事項
- [x] フィードのページネーション最適化
- [x] 検索インデックスの最適化（Supabase の ilike 使用）
- [ ] 統計データのキャッシング（今後の改善点）
- [ ] グラフライブラリの選定（Chart.js等）